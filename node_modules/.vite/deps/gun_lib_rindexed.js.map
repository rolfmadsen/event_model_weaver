{
  "version": 3,
  "sources": ["../../gun/lib/rindexed.js"],
  "sourcesContent": [";(function(){\n/* // from @jabis\nif (navigator.storage && navigator.storage.estimate) {\n  const quota = await navigator.storage.estimate();\n  // quota.usage -> Number of bytes used.\n  // quota.quota -> Maximum number of bytes available.\n  const percentageUsed = (quota.usage / quota.quota) * 100;\n  console.log(`You've used ${percentageUsed}% of the available storage.`);\n  const remaining = quota.quota - quota.usage;\n  console.log(`You can write up to ${remaining} more bytes.`);\n}\n*/\n  function Store(opt){\n    opt = opt || {};\n    opt.file = String(opt.file || 'radata');\n    var store = Store[opt.file], db = null, u;\n\n    if(store){\n      console.log(\"Warning: reusing same IndexedDB store and options as 1st.\");\n      return Store[opt.file];\n    }\n    store = Store[opt.file] = function(){};\n\n    try{opt.indexedDB = opt.indexedDB || Store.indexedDB || indexedDB}catch(e){}\n    try{if(!opt.indexedDB || 'file:' == location.protocol){\n      var s = store.d || (store.d = {});\n      store.put = function(f, d, cb){ s[f] = d; setTimeout(function(){ cb(null, 1) },250) };\n      store.get = function(f, cb){ setTimeout(function(){ cb(null, s[f] || u) },5) };\n      console.log('Warning: No indexedDB exists to persist data to!');\n      return store;\n    }}catch(e){}\n    \n\n    store.start = function(){\n      var o = indexedDB.open(opt.file, 1);\n      o.onupgradeneeded = function(eve){ (eve.target.result).createObjectStore(opt.file) }\n      o.onsuccess = function(){ db = o.result }\n      o.onerror = function(eve){ console.log(eve||1); }\n    }; store.start();\n\n    store.put = function(key, data, cb){\n      if(!db){ setTimeout(function(){ store.put(key, data, cb) },1); return }\n      var tx = db.transaction([opt.file], 'readwrite');\n      var obj = tx.objectStore(opt.file);\n      var req = obj.put(data, ''+key);\n      req.onsuccess = obj.onsuccess = tx.onsuccess = function(){ cb(null, 1) }\n      req.onabort = obj.onabort = tx.onabort = function(eve){ cb(eve||'put.tx.abort') }\n      req.onerror = obj.onerror = tx.onerror = function(eve){ cb(eve||'put.tx.error') }\n    }\n\n    store.get = function(key, cb){\n      if(!db){ setTimeout(function(){ store.get(key, cb) },9); return }\n      var tx = db.transaction([opt.file], 'readonly');\n      var obj = tx.objectStore(opt.file);\n      var req = obj.get(''+key);\n      req.onsuccess = function(){ cb(null, req.result) }\n      req.onabort = function(eve){ cb(eve||4) }\n      req.onerror = function(eve){ cb(eve||5) }\n    }\n    setInterval(function(){ db && db.close(); db = null; store.start() }, 1000 * 15); // reset webkit bug?\n    return store;\n  }\n\n  if(typeof window !== \"undefined\"){\n    (Store.window = window).RindexedDB = Store;\n    Store.indexedDB = window.indexedDB; // safari bug\n  } else {\n    try{ module.exports = Store }catch(e){}\n  }\n\n  try{\n    var Gun = Store.window.Gun || require('../gun');\n    Gun.on('create', function(root){\n      this.to.next(root);\n      root.opt.store = root.opt.store || Store(root.opt);\n    });\n  }catch(e){}\n\n}());"],
  "mappings": "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",
  "names": []
}
